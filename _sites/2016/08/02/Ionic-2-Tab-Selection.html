<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>Ionic 2 Multiple Tab Dynamic Selection</title>
<meta name="viewport" content="width=device-width">

<!-- Custom CSS -->
<link rel="stylesheet" href="/assets/css/bootstrap.min.css" />
<link rel="stylesheet" href="/assets/css/syntax.css">
<link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">
<link rel="stylesheet" href="/assets/css/timeline.css" />
<link rel="stylesheet" href="/assets/css/custom.css" />

</head>
<body  data-current-page="/2016/08/02/Ionic-2-Tab-Selection">    
    <div class="container">
        <div id="header">
    <ul class="nav nav-pills pull-right">
        <li data-page-id="home"><a href="/">Home</a></li>
        <li data-page-id="about"><a href="/about.html">About</a></li>
        <li data-page-id="portfolio"><a href="/portfolio.html">Porfolio</a></li>
        <li data-page-id="contact"><a href="/contact.html">Contact</a></li>
        <li data-page-id="blog"><a href="/blog/">Blog</a></li>
    </ul>
    <h1 class="title">
        <a href="/">
            <img src="/assets/img/thebrockellis.jpg" title="My mug shot" id='mugshot' />
            <span class='the'>The</span>BrockEllis
        </a>
    </h1>
</div>

        <div class="row">
    <div class="col-md-2 col-md-offset-1 blog-meta">
        <img src="/blog/img/2016-08-02.jpg" title="Ionic 2 Multiple Tab Dynamic Selection" class='blog-meta-image img-responsive img-thumbnail' />
        <div class="blog-meta-posted"> 02 Aug 2016 <i class="icon-calendar"></i> </div>
        <div class="blog-meta-author"> Brock Ellis <i class="icon-user"></i> </div>
        <div class="blog-meta-categories">
            
                <span class='blog-meta-category'> work <i class="icon-tag"></i> </span>
            
                <span class='blog-meta-category'> ionic2 <i class="icon-tag"></i> </span>
            
                <span class='blog-meta-category'> tabs <i class="icon-tag"></i> </span>
            
        </div>
    </div>
    <div class="col-md-9 blog-content">
        <h2>Ionic 2 Multiple Tab Dynamic Selection</h2>
        <div class="post">
            <p>tl;dr Two sets of Ionic 2 tabs and two hours later…</p>

<h2 id="situation">Situation</h2>
<p>I am working on an Ionic 2 application that has two Tab components. Each tab component has 2 page components. Let’s try and come up with a visual, shall we?</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Tab 1
----------------------------------
|            |                   |
|  Work (A)  |    Personal (B)   |
|            |                   |
----------------------------------

Tab 2
----------------------------------
|             |                  |
|  Inbox (C)  |    Outbox (D)    |
|             |                  |
----------------------------------
</code></pre>
</div>

<h2 id="problem">Problem</h2>
<p>A user logs in and selects “Personal (B)”. The app changes to <code class="highlighter-rouge">Tab 2</code> and allows them to peruse their “Inbox (C)” and “Outbox (D)” as their leisure. When they are done checking their email, they want to get back to <code class="highlighter-rouge">Tab 1</code> which is the main navigation for the app.</p>

<p>I had added the following to the header of “Inbox (C)” and “Outbox (D)” to allow navigation back to the previous tabs (<code class="highlighter-rouge">Tab 1</code>):</p>

<div class="language-html highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;ion-header&gt;</span>
  <span class="nt">&lt;ion-navbar</span> <span class="na">primary</span><span class="nt">&gt;</span>
    <span class="nt">&lt;ion-buttons</span> <span class="na">left</span><span class="nt">&gt;</span>
       <span class="nt">&lt;button</span> <span class="err">(</span><span class="na">click</span><span class="err">)="</span><span class="na">navigateToMainMenu</span><span class="err">()"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;ion-icon</span> <span class="na">name=</span><span class="s">"arrow-back"</span><span class="nt">&gt;&lt;/ion-icon&gt;</span>
       <span class="nt">&lt;/button&gt;</span>
     <span class="nt">&lt;/ion-buttons&gt;</span>
</code></pre>
</div>

<pre><code class="language-typescript">    navigateToMainMenu(){
      //have to reset the parent's navigation back to the main TabsPage
      //look here for more info: https://webcake.co/exploring-nav-hierarchy-in-the-ionic-2-tabs-page/
      this.nav.rootNav.setRoot(MainTabsPage);
    }
</code></pre>

<p>As you can see in my comments, I had to access the rootNav before setting the root to the <code class="highlighter-rouge">MainTabsPage</code> (which is <code class="highlighter-rouge">Tab 1</code> from the diagrams above). The issue with this is that it would always direct the user back to the “Work (A)” component. The user got to the <code class="highlighter-rouge">Tab 2</code> from “Personal (B)” so taking them back to A is not a super UX.</p>

<p>I spent way too many hours Googling and cruising the Ionic forums for answers, when I stumbled upon this little gem in the documentation for setRoot:</p>

<p><img src="/blog/img/2016-08-02-1.jpg" class="img-responsive img-thumbnail" style="width: 100%;" /></p>

<p>When setting the root page, you can pass along parameters!</p>

<p>So I quickly adjusted my code to send through an index that would be used in <code class="highlighter-rouge">Tab 1</code> to change the tab to “Personal (B)” like so:</p>

<pre><code class="language-typescript">  navigateToMainMenu(){
    this.nav.rootNav.setRoot(MainTabsPage, {tabIndex: 1});
  }
</code></pre>

<p>And then inside of the MainTabsPage component, I import NavParams and set it in the constructor and fetch the <code class="highlighter-rouge">tabIndex</code>. If <code class="highlighter-rouge">tabIndex</code> is present, I use that set which tab is currently selected using property binding.</p>

<pre><code class="language-typescript">  export class MainTabsPage {
    private tab1Root: any;
    private tab2Root: any;
    public tabIndex:Number = 0;

    constructor(public params:NavParams) {
      let tabIndex = this.params.get('tabIndex');
      if(tabIndex){
        this.tabIndex = tabIndex;
      }
</code></pre>

<p>Here is the attribute binding in the template:</p>

<div class="language-html highlighter-rouge"><pre class="highlight"><code>  <span class="nt">&lt;ion-tabs</span> <span class="err">[</span><span class="na">selectedIndex</span><span class="err">]='</span><span class="na">tabIndex</span><span class="err">'</span> <span class="err">#</span><span class="na">myTabs</span> <span class="na">id=</span><span class="s">"myTabs"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;ion-tab</span> <span class="err">[</span><span class="na">root</span><span class="err">]="</span><span class="na">tab1Root</span><span class="err">"</span> <span class="na">tabTitle=</span><span class="s">"Work"</span> <span class="na">tabIcon=</span><span class="s">"home"</span><span class="nt">&gt;&lt;/ion-tab&gt;</span>
    <span class="nt">&lt;ion-tab</span> <span class="err">[</span><span class="na">root</span><span class="err">]="</span><span class="na">tab2Root</span><span class="err">"</span> <span class="na">tabTitle=</span><span class="s">"Personal"</span> <span class="na">tabIcon=</span><span class="s">"person"</span><span class="nt">&gt;&lt;/ion-tab&gt;</span>
  <span class="nt">&lt;/ion-tabs&gt;</span>
</code></pre>
</div>

<p>Boom. Navigating from <code class="highlighter-rouge">Tab 2</code> takes you back to “Personal (B)”. Phew.</p>

<h2 id="hacker-ethos-ftw">Hacker ethos, FTW</h2>
<p>Tonight was supposed to be so productive. Changing what tab was selected when navigating back to <code class="highlighter-rouge">Tab 1</code> was supposed to be a 5 minute fix before I could get to the <strong>real</strong> work for tonight. Guess the coding gods had other plans.</p>

<p>In my head it didn’t seem like that hard of a concept, but there didn’t seem to be any resources on the interwebz addressing this same scenario. This feels hacky and somewhere, deep down in my bones, I feel there is a better way to do this (or a better way to architect the app so this isn’t an issue) but my hope is that this blog post helps someone else out in their hour of need.</p>

        </div>
        
            <div id="disqus_thread"></div>
            <script type="text/javascript">
                /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                var disqus_shortname    = "thebrockellis";
                var disqus_title        = "Ionic 2 Multiple Tab Dynamic Selection";
                var disqus_url          = "http://thebrockellis.com/2016/08/02/Ionic-2-Tab-Selection";

                /* * * DON'T EDIT BELOW THIS LINE * * */
                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
            </script>
        
    </div>
</div>


        <div class="row" id="footer">
    <div class="col-md-4">
        <span class="the">The</span> Brock Ellis
    </div>
    <div class="col-md-4">
        Jack of all trades, master of none
    </div>
    <div class="col-md-4">
        brock[at]sharproot[dot]com
    </div>
</div>

<SCRIPT type="text/javascript" src="//code.jquery.com/jquery.js"></SCRIPT>
<SCRIPT type="text/javascript">
$(document).ready(function(){
    // highlight current page
    var currentPage = $("body").data("current-page");
    if (currentPage) {
        $("li[data-page-id='" + currentPage + "']").addClass("active");
    }
});
</SCRIPT>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-35551321-2']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

    </div>
</body>
</html>
