<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>The Checkbox Conundrum</title>
<meta name="viewport" content="width=device-width">

<!-- Custom CSS -->
<link rel="stylesheet" href="/assets/css/bootstrap.min.css" />
<link rel="stylesheet" href="/assets/css/syntax.css">
<link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">
<link rel="stylesheet" href="/assets/css/timeline.css" />
<link rel="stylesheet" href="/assets/css/custom.css" />

</head>
<body  data-current-page="/code/work/2014/03/19/Checkbox-Conundrum">    
    <div class="container">
        <div id="header">
    <ul class="nav nav-pills pull-right">
        <li data-page-id="home"><a href="/">Home</a></li>
        <li data-page-id="about"><a href="/about.html">About</a></li>
        <li data-page-id="portfolio"><a href="/portfolio.html">Porfolio</a></li>
        <li data-page-id="contact"><a href="/contact.html">Contact</a></li>
        <li data-page-id="blog"><a href="/blog/">Blog</a></li>
    </ul>
    <h1 class="title">
        <a href="/">
            <img src="/assets/img/thebrockellis.jpg" title="My mug shot" id='mugshot' />
            <span class='the'>The</span>BrockEllis
        </a>
    </h1>
</div>

        <div class="row">
    <div class="col-md-2 col-md-offset-1 blog-meta">
        <img src="/blog/img/2014-03-19.jpg" title="The Checkbox Conundrum" class='blog-meta-image img-responsive img-thumbnail' />
        <div class="blog-meta-posted"> 19 Mar 2014 <i class="icon-calendar"></i> </div>
        <div class="blog-meta-author"> Brock Ellis <i class="icon-user"></i> </div>
        <div class="blog-meta-categories">
            
                <span class='blog-meta-category'> code <i class="icon-tag"></i> </span>
            
                <span class='blog-meta-category'> work <i class="icon-tag"></i> </span>
            
        </div>
    </div>
    <div class="col-md-9 blog-content">
        <h2>The Checkbox Conundrum</h2>
        <div class="post">
            <p>tl;dr Disabled form elements do not get submitted with the form and readonly doesn’t work as you would think for checkboxes</p>

<h2 id="background">Background</h2>
<p>Today I was working on a bugfix request. Nothing out of the usual. I usually knock out 3 or 4 of those a day, but this one was a bit of a doosey.</p>

<p>We were displaying a form with a few checkboxes. In one of the checkboxes (a very important one) we didn’t want the user to be able to uncheck it if some condition was met (for very good reasons, I assure you). When we queried the database, if a value came back true, we would add a ‘disabled’ attribute to the checkbox. Awesome! The checkbox couldn’t be changed and we were happy.</p>

<h2 id="problem">Problem</h2>
<p>The problem was when the user submitted the form, but database record for that value went in as false. I couldn’t understand what was happening. The value came out of the database false, the use submits the form and the value goes back into the database as true. Wha?!</p>

<h2 id="solution">Solution</h2>
<p>I did some <a href="http://www.w3schools.com/tags/att_input_disabled.asp">digging</a> and found out that checkboxes with the ‘disabled’ attribute are not actually submitted with the rest of the form data. Not only is this the case for checkboxes, but for <strong>all input elements</strong>. When we process the data, we check to see if that value is present and if it is not, we default the value to false.  Wow. Noobie error. I should have known that but now I do, so moving on.</p>

<p>So I went ahead and applied the HTML atttribute “readonly” to my checkbox. Sounded like a reasonable idea, right? I just want the user to be able to see it and not change it. Made the change and tested it out. Firefox automatically changes my cursor to a red circle letting me know the checkbox isn’t to be messed with…but, I can still check or uncheck it!?</p>

<p>Well, upon <a href="http://stackoverflow.com/questions/155291/can-html-checkboxes-be-set-to-readonly">further research</a> the ‘readonly’ attribute doesn’t work for checkboxes like you would first think. “Readonly” is meant to prevent the use from editing the value of an input. With checkboxes, you’re never editing the value of the input, just the <strong>state</strong> of the input (checked vs non-checked). I’m sure some very smart people implemented checkboxes to work that way, but it goes against my first gut instinct.</p>

<p>The final fix was to just display a dummie checkbox and include a hidden input if that value was true and the normal checkbox if that value was false. The accomplishes the goal of having the user see, but NOT edit, the input when that value is true but allows them to change it when it is false. </p>

        </div>
        
            <div id="disqus_thread"></div>
            <script type="text/javascript">
                /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                var disqus_shortname    = "thebrockellis";
                var disqus_title        = "The Checkbox Conundrum";
                var disqus_url          = "http://thebrockellis.com/code/work/2014/03/19/Checkbox-Conundrum.html";

                /* * * DON'T EDIT BELOW THIS LINE * * */
                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
            </script>
        
    </div>
</div>


        <div class="row" id="footer">
    <div class="col-md-4">
        <span class="the">The</span> Brock Ellis
    </div>
    <div class="col-md-4">
        Jack of all trades, master of none
    </div>
    <div class="col-md-4">
        brock[at]sharproot[dot]com
    </div>
</div>

<SCRIPT type="text/javascript" src="//code.jquery.com/jquery.js"></SCRIPT>
<SCRIPT type="text/javascript">
$(document).ready(function(){
    // highlight current page
    var currentPage = $("body").data("current-page");
    if (currentPage) {
        $("li[data-page-id='" + currentPage + "']").addClass("active");
    }
});
</SCRIPT>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-35551321-2']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

    </div>
</body>
</html>
